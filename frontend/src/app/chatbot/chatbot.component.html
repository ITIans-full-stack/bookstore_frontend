<div class="chatbot-toggle" (click)="toggleChatbot()">
  ðŸ’¬
</div>

<div class="chatbot-window" *ngIf="showChatbot">
  <div class="chatbot-header">
    ðŸ¤– Book Assistant
    <span class="close-btn" (click)="toggleChatbot()">âœ–</span>
  </div>

  <div class="chatbot-messages" #messagesContainer>
    <div *ngFor="let msg of conversation" [ngClass]="msg.role" class="message-bubble">
      <div class="bubble">
        <span [innerHTML]="msg.content"></span>
      </div>
    </div>

    <div *ngIf="typingResponse" class="assistant message-bubble">
      <div class="bubble typing-bubble">
        <span [innerHTML]="typingResponse"></span><span class="cursor">|</span>
      </div>
    </div>
  </div>

  <div class="chatbot-input">
    <input
      type="text"
      [(ngModel)]="userMessage"
      placeholder="Ask about a book..."
      (keydown.enter)="sendMessage()" />

    <button (click)="sendMessage()" [disabled]="isLoading">Send</button>
  </div>
</div>
