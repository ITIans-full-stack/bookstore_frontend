<div class="col">
    <div class="card h-100 border-0">
        <div class="position-relative bg-light rounded product-image-wrapper">
<span *ngIf="book?.price == 0" class="badge badge-discount bg-success">Free</span>
<span *ngIf="book.price > 0 && book.discount" class="badge badge-discount">
  {{ book.discount }}%
</span>

            <div class="product-actions">
                <app-wishlist-btn></app-wishlist-btn>
                <!-- <div class="icon-btn"><i class="bi bi-eye"></i></div> -->
            </div>

        <div class="product-image-inner d-flex justify-content-center align-items-center h-100" (click)="goToDetails()">
                 <img
                 *ngIf="book?.image"
            [src]="book.image"
            class=" img-fluid product-img"
            [alt]="book.title" />
        </div>

            <!-- <button class="btn add-to-cart w-70">Add To Cart</button> -->

            <div>
                <button 
  class="btn add-to-cart w-70 text-light"
  *ngIf="book"
 
  [ngClass]="{
    'btn-secondary disabled-btn': book.stock === 0 || book.stock === undefined
  }"
  [attr.title]="book.stock === 0 || book.stock === undefined ? 'Out of Stock' : 'Add this book to your cart'"
  data-bs-toggle="tooltip"
  data-bs-placement="top"
  (click)="onAddToCart()">
  Add To Cart
</button>
            </div>
        </div>

        <div class="card-body text-start px-0 pt-3">
            <h6 class="fw-medium mb-2">{{ book?.title}}</h6>
            <div class="d-flex align-items-center gap-2 mb-2">
                <span class="text-danger fw-medium">{{ book?.price | currency: 'EGP' }} </span>
                <span *ngIf="book?.discount && book.price>0" class="text-muted text-decoration-line-through">{{(book.price / (1 - book.discount / 100) | currency: 'EGP')}}</span>
            </div>
            <div class="d-flex align-items-center gap-2">
            <app-rating [averageRating]="book.averageRating" [stock]="book.stock" [hasRating]="!!book.averageRating"></app-rating>
                <!-- <span class="text-muted small">({{ book.stock || 0 }})</span> -->
            </div>
        </div>
    </div>

</div>